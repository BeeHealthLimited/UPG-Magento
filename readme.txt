=============================================
= Magento Payment Module for Secure Hosting =
=         http://www.securehosting.com/     =
=============================================

Copyright: UPG PLC 2015
Author: Kevin Busby
Version: 1.2
Version compatibility: Magento V1.9.1.0 and V1.9.1.1

===============
= Installation  =
===============

1.	Copy the directory "app" to the root of your shopping cart where you should already find directory called "app".

2.	Upload the below HTML files to your Secure Hosting account. We recommend uploading the default files first, testing,
	then amending these files as required. File uploads are managed within your Secure Hosting	and Payments account via 
	the menu option 'Settings -> File Manager':
	- magento_template.html
	- htmlgood.html
	- htmlbad.html

3.	Delete the content of the directory /{site root}/var/cache/, don't worry Magento will rebuild this without a problem.
   
4.	Go into the Magento Admin Interface and open the payment modules under 'System -> Configuration -> Sales -> Payment Methods',
	you will find SecureHosting now appears as a payment module. Expand the module and enable it. You will also need to
	configure the below settings in order to complete the basic set-up:

	- SH Reference - This is the SH Reference for your Secure Hosting and Payments account. This is also known as the Client
		Login, you will find the value for this within the Company Details section of your Secure Hosting and Payments account.

	- Check Code - This is the second level security check code for your Secure Hosting and Payments account, it is a second
		unique identifier for your account. The value of your check code can be found within the Comany Details 
		section of your Secure Hosting and Payments account.

	- File Name - This is the file name of the payment page template you need to upload to your Secure Hosting and Payments account. The file name of the example template provided with this integration module is 
		"magento_template.html". You can rename this file if you desire, you only need to ensure the name of the file you upload to your Secure Hosting and Payments account is correctly set here.

5.	Put a Transaction through, sit back and have a cup of coffee!!

==========================
= Advanced Configuration =
==========================

======================
= Advanced Secuitems =
======================

The Secure Hosting and Payments system supports the facility to secure your checkout from tempering, the facility is supported
by the Advanced Secuitems feature. In order for the Advanced Secuitems to work correctly, it must be correctly configured in
both the Magento Admin Interface and your Secure Hosting and Payments account. The settings for the Advanced Secuitems functionality
within your Secure Hosting and Payments account are found within the Advanced Settings section of the account.

1.	Activate Advanced Secuitems - In order to activate use of the Advanced Secuitems, set to "Yes". You will also need to activate
		the feature within your Secure Hosting and Payments account, this is performed by checking the below setting: 
	- Activate advanced secuitems security -
	
	In addition to activating the Advanced Secuitems in your Secure Hosting account, you must enter "transactionamount" into the list of fields to be encrypted.
	
2.	Advanced Secuitems Phrase - When securing your checkout, the Secure Hosting and Payments system uses a unique phrase to create it's
		encrypted string. The phrase entered into your Magento web site here must match the phrase configured within the Advanced Settings section
		of your Secure Hosting and Payments account otherwise the system will block your transactions.
	
3.	Shopping Cart Referrer - As part of the security in generating the encrypted string, the Secure Hosting and Payments system needs to verify the
		shopping cart request, this is done by checking the referrer. The referrer configured here must match the referrer configured within your
		Secure Hosting and Payments account within the Advances Settings. An example referrer for your site would be "http://www.mysite.com/index.php".

=================
= Shared Secret =
=================
The Magento integration used the Callbacks from Secure Hosting feature to update itself, confirming that an order has been placed. In order
to prevent the callback from Secure Hosting being spoofed, the Secure Hosting and Payments system supported a Shared Secret value which is
used to generate a unique verification string which could only have been generated by Secure Hosting and Payments.

4.	Shared Secret - In order to activate the Share Secret callback verification, enter your Shared Secret value in the Magento admin interface
		and within the Advanced Settings of your Secure Hosting and Payments account. The Shared Secret value can be anything you want, it just
		needs to be the same in both Magento and Secure Hosting and Payments.
	
5.	Test Mode - The Secure Hosting and Payments system can run in test mode and processes your transactions as test transaction. Change this
		setting to True to use the test mode. Don't forget to change this back to False before going live!

6.	Redirect Message - The redirect message is displayed to customer's when they select the Secure Hosting and Payments option while in the Magento One Page checkout.

=================
= Order Status  =
=================

7.	New Order Status - This determines the state an order will be left in on confirmation of payment.

===================
= Troubleshooting =
===================
Q1.	When I get transferred to the Secure Hosting and Payments Site the following message appears: The file SH2?????/ does not exist.

A1.	You have not completed steps 2 and/or 3 of the installation.

Q2.	When a transaction is submitted the following error is displayed: Merchant Implementation Error - Incorrect client SH reference and check code combination
	
A2.	You have entered an incorrect client reference or check code into the Open Cart admin interface.

Q3.	When I get transferred to the Secure Hosting and Payments site, the following message appears: Advanced secuitems security check failed.

A3.	You have activated the Advanced Secuitems within your Secure Hosting and Payments account but not correctly configured it. Please see steps 1-3 of the Advanced Configuration section of this guide.

===========
= Contact =
===========

If you have any problems installing this module feel free to contact our support team at:
Support Tel     : +44(0) 845 269 6645
Support Email   : support@upg.co.uk 

==================
= Change History =
==================
Version 1.0
- Author: Darren Potter
- Date:	15/05/2013
- Details:
	- Moved URLs using within controllers to Config.php
	- Added Advanced Secuitems
	- Added Shared Secrets
	- Added Test Mode
	- Added configurable File Name
	- Added suggestive default values
	
Version 1.1
 - Author: Ben Davis
 - Date: 29/01/2015
 - Details:
	- Tested with lastest version of Magento.
	- Added ability to set the state of an order on confirmation of payment.